---
layout: form
---

We've got all the information we need about what you need.

<h1>About you</h1>

<form id="submission">

<label>Institutional Email Address (Required)</label>
<p><input required="required" class="oabutton_form" type="email" id="email" placeholder="e.g. your.email@institution.edu"></p>

<label>Full Name (Required)</label>
<p><input required="required" class="oabutton_form" type="text" id="name" placeholder="e.g. Carla Hayden"></p>

<label>Library Name (Required)</label>
<p><input required="required" class="oabutton_form" type="text" id="organization" placeholder="e.g. Harvard University Library"></p>

<label>Notes</label>
<p><input class="oabutton_form" type="text" id="other" placeholder="e.g. Please process quickly!"></p>

<input class="oabutton_find" href="thanks" id="submit" aria-label="submit" style="min-width:150px;" type="submit">

</form>

<script>
jQuery(document).ready(function() {

  var sid = 'AKfycbwFA_R-0gjzVS9029ByVpduCYJbHLH0ujstNng1aNnRogw1htU';
  var url = 'https://api.openaccessbutton.org/ill/collect/' + sid;
  var fields = ["atitle","title","issn","publisher","aulast","date","volume","issue","pages","doi","pmid","pmcid","notes","crossref_type","url","where","year","email","name","organization","other"];

  var goto = false;
  var valid = undefined;
  var submit = function(e) {
    if (valid === false) {
      valid = undefined; // reset validity check and let the form continue to display warning
    } else {
      try { e.preventDefault(); } catch(err) {};

      valid = $('#submission')[0].checkValidity();
      if (!valid) {
        $('#submit').click(); // will run again, but this time skip to letting the form display warning
      } else {
        // form valid now, send the data and go to thanks
        var data = {};

        $('.oabutton_form').each(function() {
          if (!fields.length || fields.indexOf($(this).attr('id')) !== -1) data[$(this).attr('id')] = $(this).val();
        });

        if (window.location.search) {
          var s = window.location.search.split('?')[1];
          var params = s.split('&');
          for ( var p of params ) {
            var parts = p.split('=');
            if (parts.length === 2 && parts[0] !== 'nothanks' && (!fields.length || fields.indexOf(parts[0]) !== -1)) data[parts[0]] = parts[1];
          }
        }

        goto = $(this).attr('href');
        console.log(data);
        $.ajax({
          url: url,
          method: 'GET',
          dataType: 'json',
          data: data,
          success: function(res) {
            console.log(res);
            if (window.location.search.indexOf('nothanks') === -1) window.location = goto;
          }
        });
      }
    }
  }
  $('body').on('click','#submit',submit);

});
</script>
